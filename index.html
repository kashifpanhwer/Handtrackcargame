<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>AI Hand Glow Particles</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
}
canvas{
  position:absolute;
  top:0;left:0;
}
#video{display:none;}
#status{
  position:fixed;
  top:15px;
  width:100%;
  text-align:center;
  color:#0ff;
  font-family:sans-serif;
  font-size:13px;
}
#ui{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  background:rgba(255,255,255,.1);
  backdrop-filter:blur(10px);
  padding:10px 14px;
  border-radius:40px;
}
select,input{
  background:#111;
  color:#0ff;
  border:1px solid #333;
  padding:8px 12px;
  border-radius:20px;
}
</style>
</head>

<body>

<div id="status">Starting Camera AI...</div>
<video id="video" playsinline></video>
<canvas id="canvas"></canvas>

<div id="ui">
  <select id="shape">
    <option value="heart">‚ù§Ô∏è Heart</option>
    <option value="circle">‚≠ï Circle</option>
    <option value="star">‚≠ê Star</option>
    <option value="burst">üí• Burst</option>
  </select>
  <input type="color" id="color" value="#00ffff">
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const video = document.getElementById("video");
const status = document.getElementById("status");

canvas.width = innerWidth;
canvas.height = innerHeight;
window.onresize = () => {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
};

const COUNT = 350;
let particles = [];
let targets = [];
let handX = canvas.width/2;
let handY = canvas.height/2;
let scale = 1;
let handSeen = false;

class Particle{
  constructor(){
    this.x = Math.random()*canvas.width;
    this.y = Math.random()*canvas.height;
  }
  update(tx,ty){
    const speed = 0.08;
    this.x += (tx - this.x)*speed;
    this.y += (ty - this.y)*speed;
  }
  draw(color){
    ctx.fillStyle = color;
    ctx.shadowBlur = 10;
    ctx.shadowColor = color;
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fill();
  }
}

function makeShape(type){
  targets=[];
  for(let i=0;i<COUNT;i++){
    let a=i/COUNT*Math.PI*2;
    let x=0,y=0;
    if(type==="heart"){
      x=16*Math.sin(a)**3;
      y=-(13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a));
    }
    else if(type==="circle"){
      x=15*Math.cos(a); y=15*Math.sin(a);
    }
    else if(type==="star"){
      let r=i%2?8:15;
      x=r*Math.cos(a); y=r*Math.sin(a);
    }
    else{
      x=(Math.random()-.5)*30;
      y=(Math.random()-.5)*30;
    }
    targets.push({x:x*8,y:y*8});
  }
}

for(let i=0;i<COUNT;i++) particles.push(new Particle());
makeShape("heart");

const hands = new Hands({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});

hands.setOptions({
  maxNumHands:1,
  modelComplexity:0,
  minDetectionConfidence:0.6
});

hands.onResults(res=>{
  if(res.multiHandLandmarks){
    const lm=res.multiHandLandmarks[0];
    handSeen=true;
    handX=(1-lm[8].x)*canvas.width;
    handY=lm[8].y*canvas.height;
    let d=Math.hypot(lm[4].x-lm[20].x,lm[4].y-lm[20].y);
    scale=0.6+d*3;
    status.innerText="HAND DETECTED";
  }else{
    handSeen=false;
    status.innerText="SHOW YOUR HAND";
  }
});

const cam = new Camera(video,{
  onFrame:async()=>await hands.send({image:video}),
  width:480,height:360
});
cam.start();

function animate(){
  ctx.fillStyle="rgba(0,0,0,.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  let c=document.getElementById("color").value;

  particles.forEach((p,i)=>{
    let tx = handX + targets[i].x*scale;
    let ty = handY + targets[i].y*scale;
    p.update(tx,ty);
    p.draw(c);
  });
  requestAnimationFrame(animate);
}
animate();

document.getElementById("shape").onchange=e=>makeShape(e.target.value);
</script>

</body>
</html>

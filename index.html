
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Hand Control With Camera</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  overflow:hidden;
}
video{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  transform:scaleX(-1);
}
canvas{
  position:absolute;
  top:0;left:0;
}
#info{
  position:fixed;
  top:10px;
  width:100%;
  text-align:center;
  color:#0ff;
  font-family:sans-serif;
}
</style>
</head>

<body>

<div id="info">Show Hand</div>
<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

canvas.width = innerWidth;
canvas.height = innerHeight;

let x = canvas.width/2;
let y = canvas.height/2;
let open = true;

const hands = new Hands({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});

hands.setOptions({
  maxNumHands:1,
  modelComplexity:0,
  minDetectionConfidence:0.6
});

hands.onResults(res=>{
  if(res.multiHandLandmarks){
    const lm = res.multiHandLandmarks[0];

    // Hand position
    x = (1-lm[8].x)*canvas.width;
    y = lm[8].y*canvas.height;

    // OPEN / CLOSE (fist detect)
    const d = Math.hypot(lm[8].x-lm[4].x,lm[8].y-lm[4].y);
    open = d > 0.08;

    info.innerText = open ? "HAND OPEN" : "HAND CLOSED";
  }else{
    info.innerText = "Show Hand";
  }
});

const camera = new Camera(video,{
  onFrame: async()=>await hands.send({image:video}),
  width:480,height:360
});
camera.start();

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = open ? "#00ffff" : "#ff0044";
  ctx.beginPath();
  ctx.arc(x,y, open ? 40 : 20 ,0,Math.PI*2);
  ctx.fill();

  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
